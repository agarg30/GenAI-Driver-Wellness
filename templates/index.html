<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenAI Driver Wellness</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style>
        body { font-family: Arial, sans-serif; background: #f7f7f7; margin: 0; padding: 0; }
        .container { max-width: 600px; margin: 40px auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #2c3e50; }
        label { display: block; margin-top: 15px; }
        input, textarea { width: 100%; padding: 8px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc; }
        button { margin-top: 20px; width: 100%; padding: 10px; background: #27ae60; color: #fff; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; }
        button:hover { background: #219150; }
        .message { margin-top: 20px; text-align: center; color: #2980b9; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Driver Wellness Data Entry</h2>
        <form method="POST">
            <label for="driver_name">Driver Name:</label>
            <input type="text" id="driver_name" name="driver_name" required>

            <label for="trip_hours">Trip Hours:</label>
                <input type="number" id="trip_hours" name="trip_hours" min="1" step="1" required>
                <small style="color: #888;">Enter total hours for the trip (must be positive, e.g. 5, 12, 24)</small>

            <label for="fatigue_level">Fatigue Level (1-10):</label>
                <input type="number" id="fatigue_level" name="fatigue_level" min="1" max="10" step="1" required>
                <small style="color: #888;">Rate your fatigue from 1 (fully alert) to 10 (extremely tired)</small>

            <label for="wellness_note">Wellness Note:</label>
                <textarea id="wellness_note" name="wellness_note" rows="3" required></textarea>
                <small style="color: #888;">E.g. "Feeling good after rest", "Need a break soon", "Slept well last night"</small>

                <label for="on_medication">Is driver on any medication?</label>
                <select id="on_medication" name="on_medication" required>
                    <option value="No">No</option>
                    <option value="Yes">Yes</option>
                </select>
                <small style="color: #888;">Select 'Yes' if the driver is currently taking any medication.</small>

                <div id="medication_details" style="display:none; margin-top:10px;">
                    <label for="medication_type">Medication Type:</label>
                    <input type="text" id="medication_type" name="medication_type">
                    <small style="color: #888;">E.g. "Diabetic", "Blood Pressure", "Pain Relief"</small>

                    <label for="medication_schedule">Medication Schedule:</label>
                    <input type="text" id="medication_schedule" name="medication_schedule">
                    <small style="color: #888;">E.g. "Every 6 hours", "Once daily at 8am"</small>
                </div>

                    <label for="driver_readiness">How do you feel before driving?</label>
                    <select id="driver_readiness" name="driver_readiness" required>
                        <option value="Fresh">Fresh and ready</option>
                        <option value="Tired">Tired</option>
                        <option value="Stressed">Stressed</option>
                    </select>
                    <small style="color: #888;">If you feel tired or stressed, it's advised not to start the trip.</small>

                    <label for="emergency_contact">Emergency Contact Number:</label>
                    <input type="tel" id="emergency_contact" name="emergency_contact" pattern="[0-9]{10}" required>
                    <small style="color: #888;">Enter a 10-digit phone number for emergencies.</small>

                <script>
                document.getElementById('on_medication').addEventListener('change', function() {
                    var details = document.getElementById('medication_details');
                    if (this.value === 'Yes') {
                        details.style.display = 'block';
                        document.getElementById('medication_type').required = true;
                        document.getElementById('medication_schedule').required = true;
                    } else {
                        details.style.display = 'none';
                        document.getElementById('medication_type').required = false;
                        document.getElementById('medication_schedule').required = false;
                    }
                });
                </script>

            <button type="submit">Submit</button>
        </form>
        {% if message %}
        <div class="message">{{ message }}</div>
        {% endif %}
        {% if wellness_message %}
        <div class="card mt-4 shadow-sm">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0">Personalized Wellness Advice</h4>
            </div>
            <div class="card-body">
                <div style="white-space:pre-line; font-size:1.08em;">
                    {{ wellness_message|safe }}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</html>
